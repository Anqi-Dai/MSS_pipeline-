select(description, fg1_full_name,gram_sugar_per_meal, gram_per_meal ) %>%
gather('grp','gram',gram_sugar_per_meal: gram_per_meal) %>%
mutate(grp = if_else(grp == 'gram_sugar_per_meal', 'Sugar content', 'Total') ) %>%
mutate(grp = factor(grp, levels = c('Sugar content','Total'))) %>%
# there is something about the sugar in ginger ale and I need to do something
mutate()
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- ggbarplot(bars, "description", "gram",xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c("#FB9A99" ,"gray"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(legend.position = c(2,.5),
axis.text.y = element_text(size=10),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# how about I plot it in bar plot and so I can have the sugar in gram per meal in the same bar to show the perc
bars <- top3grp_sugar %>%
select(description, fg1_full_name,gram_sugar_per_meal, gram_per_meal ) %>%
gather('grp','gram',gram_sugar_per_meal: gram_per_meal) %>%
mutate(grp = if_else(grp == 'gram_sugar_per_meal', 'Sugar content', 'Total') ) %>%
mutate(grp = factor(grp, levels = c('Sugar content','Total'))) %>%
# there is something about the sugar in ginger ale and I need to do something
mutate()
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- ggbarplot(bars, "description", "gram",xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c("#FB9A99" ,"gray"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(legend.position = c(2,6),
axis.text.y = element_text(size=10),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# how about I plot it in bar plot and so I can have the sugar in gram per meal in the same bar to show the perc
bars <- top3grp_sugar %>%
select(description, fg1_full_name,gram_sugar_per_meal, gram_per_meal ) %>%
gather('grp','gram',gram_sugar_per_meal: gram_per_meal) %>%
mutate(grp = if_else(grp == 'gram_sugar_per_meal', 'Sugar content', 'Total') ) %>%
mutate(grp = factor(grp, levels = c('Sugar content','Total'))) %>%
# there is something about the sugar in ginger ale and I need to do something
mutate()
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- ggbarplot(bars, "description", "gram",xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c("#FB9A99" ,"gray"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(legend.position = c(1,6),
axis.text.y = element_text(size=10),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# how about I plot it in bar plot and so I can have the sugar in gram per meal in the same bar to show the perc
bars <- top3grp_sugar %>%
select(description, fg1_full_name,gram_sugar_per_meal, gram_per_meal ) %>%
gather('grp','gram',gram_sugar_per_meal: gram_per_meal) %>%
mutate(grp = if_else(grp == 'gram_sugar_per_meal', 'Sugar content', 'Total') ) %>%
mutate(grp = factor(grp, levels = c('Sugar content','Total'))) %>%
# there is something about the sugar in ginger ale and I need to do something
mutate()
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- ggbarplot(bars, "description", "gram",xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c("#FB9A99" ,"gray"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(legend.position = c(.5,6),
axis.text.y = element_text(size=10),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
cola_sugar
bars
# how about I plot it in bar plot and so I can have the sugar in gram per meal in the same bar to show the perc
bars <- top3grp_sugar %>%
select(description, fg1_full_name,gram_sugar_per_meal, gram_per_meal ) %>%
gather('grp','gram',gram_sugar_per_meal: gram_per_meal) %>%
mutate(grp = if_else(grp == 'gram_sugar_per_meal', 'Sugar content', 'Total') ) %>%
mutate(grp = factor(grp, levels = c('Sugar content','Total'))) %>%
# there is something about the sugar in ginger ale and I need to do something
mutate(gram = if_else(description == 'Soft drink, ginger ale' & grp == 'Sugar content', 2.1185367*cola_sugar, gram))
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- ggbarplot(bars, "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c("#FB9A99" ,"gray"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(legend.position = c(.5,6),
axis.text.y = element_text(size=10),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
bars
?str_wrap
# how about I plot it in bar plot and so I can have the sugar in gram per meal in the same bar to show the perc
bars <- top3grp_sugar %>%
select(description, fg1_full_name,gram_sugar_per_meal, gram_per_meal ) %>%
gather('grp','gram',gram_sugar_per_meal: gram_per_meal) %>%
mutate(grp = if_else(grp == 'gram_sugar_per_meal', 'Sugar content', 'Total') ) %>%
mutate(grp = factor(grp, levels = c('Sugar content','Total'))) %>%
# there is something about the sugar in ginger ale and I need to do something
mutate(gram = if_else(description == 'Soft drink, ginger ale' & grp == 'Sugar content', 2.1185367*cola_sugar, gram)) %>%
mutate(description = str_wrap(description, indent = 4, width = 30))
bars
# how about I plot it in bar plot and so I can have the sugar in gram per meal in the same bar to show the perc
bars <- top3grp_sugar %>%
select(description, fg1_full_name,gram_sugar_per_meal, gram_per_meal ) %>%
gather('grp','gram',gram_sugar_per_meal: gram_per_meal) %>%
mutate(grp = if_else(grp == 'gram_sugar_per_meal', 'Sugar content', 'Total') ) %>%
mutate(grp = factor(grp, levels = c('Sugar content','Total'))) %>%
# there is something about the sugar in ginger ale and I need to do something
mutate(gram = if_else(description == 'Soft drink, ginger ale' & grp == 'Sugar content', 2.1185367*cola_sugar, gram)) %>%
mutate(description = str_wrap(description, indent = 4, width = 30))
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- ggbarplot(bars, "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c("#FB9A99" ,"gray"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(legend.position = c(.5,6),
axis.text.y = element_text(size=10),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
View(key)
# how to sort the bars
bars %>%
filter(grp == 'Total')
# how to sort the bars
order_ <= bars %>%
filter(grp == 'Total') %>%
arrange(gram) %>%
pull(description)
# how to sort the bars
order_ <- bars %>%
filter(grp == 'Total') %>%
arrange(gram) %>%
pull(description)
# how to sort the bars
order_ <- bars %>%
filter(grp == 'Total') %>%
arrange(gram) %>%
pull(description)
order_
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- bars %>%
mutate(description = factor(description, levels = order_)) %>%
ggbarplot( "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c("#FB9A99" ,"gray"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(legend.position = c(.5,6),
axis.text.y = element_text(size=10),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- bars %>%
mutate(description = factor(description, levels = order_)) %>%
ggbarplot( "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c("#FB9A99" ,"gray"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(
axis.text.y = element_text(size=10),
#legend.position = c(.5,6),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- bars %>%
mutate(description = factor(description, levels = order_)) %>%
ggbarplot( "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c("#db2589" ,"#ffbcdc"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(
axis.text.y = element_text(size=10),
#legend.position = c(.5,6),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- bars %>%
mutate(description = factor(description, levels = order_)) %>%
ggbarplot( "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c( "#ffbcdc", "#db2589"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(
axis.text.y = element_text(size=10),
#legend.position = c(.5,6),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- bars %>%
mutate(description = factor(description, levels = order_)) %>%
ggbarplot( "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c( "#ffbcdc", "#db2589"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(
axis.text.y = element_text(size=10),
legend.position = c(.5,2),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
plot <- bars %>%
mutate(description = factor(description, levels = order_)) %>%
ggbarplot( "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c( "#ffbcdc", "#db2589"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(
axis.text.y = element_text(size=10),
legend.position = c(.5,5),
legend.title= element_blank())
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- bars %>%
mutate(description = factor(description, levels = order_)) %>%
ggbarplot( "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c( "#ffbcdc", "#db2589"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(
axis.text.y = element_text(size=10),
legend.position = c(.5,5),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- bars %>%
mutate(description = factor(description, levels = order_)) %>%
ggbarplot( "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c( "#ffbcdc", "#db2589"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(
axis.text.y = element_text(size=10),
legend.position = c(1,5),
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
# the percentage of sugar in cola
cola_sugar <- 0.7714132/0.8257381
library(cowplot)
title <- ggdraw() +
draw_label(
"Fig S8",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 7)
)
plot <- bars %>%
mutate(description = factor(description, levels = order_)) %>%
ggbarplot( "description", "gram",
xlab = '',ylab = 'Per meal average consumption (gram)',
fill = "grp", color = "grp", palette = c( "#ffbcdc", "#db2589"),
width = 0.7,
position = position_dodge(0.8)) +
coord_flip() +
theme(
axis.text.y = element_text(size=10),
legend.position = 'bottom',
legend.title= element_blank())
combined <- plot_grid(
title, plot,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)+theme(plot.margin = unit(c(1,3,6,1), "cm"))
ggsave('../data/S8_top10_eaten_foods_of_sweets_099.pdf',  width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
