scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/2)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.4,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.4,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.3,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.5,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.5,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.51,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.52,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.52,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.53,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.55,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',tip.length = 0.01,exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.55,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',tip.length = 0.06,exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.55,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
f3_mouse <- plotdf %>%
ggboxplot(x = 'xvar', y = 'Log_CFUs_per_GramStool',add = 'jitter',
xlab = '', ylab = 'Enterococcal\nLog10 CFU/gram',
width = 0.6,color  = 'Day')+
scale_color_manual(values = c('gray','#ffbcdc','deeppink2')) +
stat_compare_means(comparisons= list(c('biapenem__sucrose__3', 'biapenem__vehicle__3'),
c('biapenem__sucrose__3', 'PBS__sucrose__3'),
c('biapenem__sucrose__3', 'PBS__vehicle__3'),
c('biapenem__sucrose__6', 'biapenem__vehicle__6'),
c('biapenem__sucrose__6', 'PBS__sucrose__6'),
c('biapenem__sucrose__6', 'PBS__vehicle__6') ),
label= "p.signif", method= 'wilcox.test',tip.length = 0.04,exact=T,correct=T) +
scale_y_log10(breaks = c(1 %o% 10^(-1:12)),
labels = trans_format("log10", math_format(10^.x))) +
theme(axis.text.x = element_blank(),axis.ticks.x=element_blank(),
axis.text =  element_text(size = 10),legend.position = 'none',aspect.ratio=1/1.3)
# assemble
title <- ggdraw() +
draw_label(
"Fig 3",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
plot.margin = margin(0, 0, 0, 5)
)
f3 <- plot_grid(correbar, entero_panel,f3_mouse, label_size = 12, ncol = 1,labels = c('A','B','C'),
align = 'vh', axis = 'lrtb', rel_heights = c(1,1.55,1))
combined <- plot_grid(
title, f3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.05, 1)
)+theme(plot.margin = unit(c(1,7,1,1), "cm"))
ggsave('../data/F3_current_178.pdf',
width = 210, height = 297, units = "mm", device = 'pdf', plot = combined, dpi = 300)
knitr::opts_chunk$set(echo = TRUE)
set.seed(1)
library(tidyverse)
library(brms)
library(ggpubr)
library(tidybayes)
library(cowplot)
library(ggridges)
library(brmstools)
library(bayesplot)
options(mc.cores = parallel::detectCores())
rstan::rstan_options(auto_write = TRUE)
theme_set(theme_tidybayes() + panel_border())
ncores <- parallel::detectCores()
key <- read_csv('../data/cleaned_diet_data/food_group_color_key_final.csv', col_types = 'ccccc')
axis_text_size <- 10
axis_title_size <- 10
meta <- read_csv('../data/153_combined_META.csv') %>%
mutate(timebin = cut_width(sdrt, 7, boundary=0, closed = 'left')) %>%
mutate(intensity = factor(intensity, levels = c('nonablative','reduced','ablative'))) %>%
mutate(mrn = factor(mrn)) %>%
mutate(fg_egg = fg_egg/100,
fg_fruit = fg_fruit/100,
fg_grain = fg_grain/100,
fg_legume = fg_legume/100,
fg_meat = fg_meat/100,
fg_milk = fg_milk/100,
fg_oils = fg_oils/100,
fg_sweets = fg_sweets/100,
fg_veggie = fg_veggie/100) %>%
mutate(abx = if_else(empirical == 'TRUE', 1, 0),
TPN = if_else(TPN == 'TRUE', 1, 0),
EN = if_else(EN == 'TRUE', 1, 0)) %>%
mutate(      fg_fruit_e= fg_fruit*abx,
fg_meat_e=fg_meat*abx,
fg_milk_e=fg_milk*abx,
fg_oils_e=fg_oils*abx,
fg_egg_e=fg_egg*abx,
fg_grain_e=fg_grain*abx,
fg_sweets_e=fg_sweets*abx,
fg_legume_e=fg_legume*abx,
fg_veggie_e = fg_veggie*abx)
View(meta)
