#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
# only plot the post diff forest in fruits and sweets
only3 <- post_diff_df %>%
filter(term %in% c('fg_fruit','fg_sweets', 'fg_veggie'))
only3_sim <- only3 %>%
group_by(term, shortname) %>%
median_qi(post_diff_original_scale, .width = c(.95, .8, .5)) %>%
ggplot(aes(y = shortname, x = post_diff_original_scale)) +
geom_interval(aes(xmin = .lower, xmax = .upper)) +
geom_vline(xintercept = 0, linetype = "dashed", col = 'black') +
labs(x = expression(Change~`in`~alpha~diversity),
y = '',
title = 'Diversity prediction') +
theme_classic() +
#scale_color_manual(values = key %>% select(fg1_name, color) %>% deframe()) +
scale_x_continuous(breaks = seq(-10, 20, 2)) +
scale_color_brewer(palette = 'Greys')+
xlim(-6, 4.5) +
guides(color = guide_legend(override.aes = list(size = 4)))+
theme(axis.text=element_text(size=8),
legend.position = c(0.87, 0.2),
legend.key.size = unit(3, 'mm'),
legend.title = element_text( size=6),
legend.text=element_text(size=6),
axis.title=element_text(size=8),
legend.key = element_rect(fill = 'white', colour = 'black'),
aspect.ratio=1)
only3_sim
only3_sim %>%
write_rds('../data/068_only3_sim.rds')
# only plot the post diff forest in fruits and sweets
only3 <- post_diff_df %>%
filter(term %in% c('fg_fruit','fg_sweets', 'fg_veggie'))
only3_sim <- only3 %>%
group_by(term, shortname) %>%
median_qi(post_diff_original_scale, .width = c(.95, .8, .5)) %>%
ggplot(aes(y = shortname, x = post_diff_original_scale)) +
geom_interval(aes(xmin = .lower, xmax = .upper)) +
geom_vline(xintercept = 0, linetype = "dashed", col = 'black') +
labs(x = expression(Change~`in`~alpha~diversity),
y = '',
title = 'Diversity prediction') +
theme_classic() +
#scale_color_manual(values = key %>% select(fg1_name, color) %>% deframe()) +
scale_x_continuous(breaks = seq(-10, 20, 2)) +
scale_color_brewer(palette = 'Greys')+
xlim(-6, 4.5) +
guides(color = guide_legend(override.aes = list(size = 4)))+
theme(axis.text=element_text(size=8),
legend.position = c(0.87, 0.1),
legend.key.size = unit(3, 'mm'),
legend.title = element_text( size=6),
legend.text=element_text(size=6),
axis.title=element_text(size=8),
legend.key = element_rect(fill = 'white', colour = 'black'),
aspect.ratio=1)
only3_sim
only3_sim %>%
write_rds('../data/068_only3_sim.rds')
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
top <- plot_grid(  f2a,diagram,
nrow = 1, labels = c('A','B'), rel_widths = c(1, 2))
bottom <- plot_grid(  f2c,f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top, bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
# only plot the post diff forest in fruits and sweets
only3 <- post_diff_df %>%
filter(term %in% c('fg_fruit','fg_sweets', 'fg_veggie'))
only3_sim <- only3 %>%
group_by(term, shortname) %>%
median_qi(post_diff_original_scale, .width = c(.95, .8, .5)) %>%
ggplot(aes(y = shortname, x = post_diff_original_scale)) +
geom_interval(aes(xmin = .lower, xmax = .upper)) +
geom_vline(xintercept = 0, linetype = "dashed", col = 'black') +
labs(x = expression(Change~`in`~alpha~diversity),
y = '',
title = 'Diversity prediction') +
theme_classic() +
#scale_color_manual(values = key %>% select(fg1_name, color) %>% deframe()) +
scale_x_continuous(breaks = seq(-10, 20, 2)) +
scale_color_brewer(palette = 'Greys')+
xlim(-6, 4.5) +
guides(color = guide_legend(override.aes = list(size = 4)))+
theme(axis.text=element_text(size=8),
legend.position = c(0.87, 0.25),
legend.key.size = unit(3, 'mm'),
legend.title = element_text( size=6),
legend.text=element_text(size=6),
axis.title=element_text(size=8),
legend.key = element_rect(fill = 'white', colour = 'black'),
aspect.ratio=1)
only3_sim
only3_sim %>%
write_rds('../data/068_only3_sim.rds')
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
top <- plot_grid(  f2a,diagram,
nrow = 1, labels = c('A','B'), rel_widths = c(1, 2))
bottom <- plot_grid(  f2c,f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top, bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
# only plot the post diff forest in fruits and sweets
only3 <- post_diff_df %>%
filter(term %in% c('fg_fruit','fg_sweets', 'fg_veggie'))
only3_sim <- only3 %>%
group_by(term, shortname) %>%
median_qi(post_diff_original_scale, .width = c(.95, .8, .5)) %>%
ggplot(aes(y = shortname, x = post_diff_original_scale)) +
geom_interval(aes(xmin = .lower, xmax = .upper)) +
geom_vline(xintercept = 0, linetype = "dashed", col = 'black') +
labs(x = expression(Change~`in`~alpha~diversity),
y = '',
title = 'Diversity prediction') +
theme_classic() +
#scale_color_manual(values = key %>% select(fg1_name, color) %>% deframe()) +
scale_x_continuous(breaks = seq(-10, 20, 2)) +
scale_color_brewer(palette = 'Greys')+
xlim(-6, 4.5) +
guides(color = guide_legend(override.aes = list(size = 4),
title = 'HDI'))+
theme(axis.text=element_text(size=8),
legend.position = c(0.87, 0.25),
legend.key.size = unit(3, 'mm'),
legend.title = element_text( size=6),
legend.text=element_text(size=6),
axis.title=element_text(size=8),
legend.key = element_rect(fill = 'white', colour = NA),
aspect.ratio=1)
only3_sim
only3_sim %>%
write_rds('../data/068_only3_sim.rds')
# only plot the post diff forest in fruits and sweets
only3 <- post_diff_df %>%
filter(term %in% c('fg_fruit','fg_sweets', 'fg_veggie'))
only3_sim <- only3 %>%
group_by(term, shortname) %>%
median_qi(post_diff_original_scale, .width = c(.95, .8, .5)) %>%
ggplot(aes(y = shortname, x = post_diff_original_scale)) +
geom_interval(aes(xmin = .lower, xmax = .upper)) +
geom_vline(xintercept = 0, linetype = "dashed", col = 'black') +
labs(x = expression(Change~`in`~alpha~diversity),
y = '',
title = 'Diversity prediction') +
theme_classic() +
#scale_color_manual(values = key %>% select(fg1_name, color) %>% deframe()) +
scale_x_continuous(breaks = seq(-10, 20, 2)) +
scale_color_brewer(palette = 'Greys')+
xlim(-6, 4.5) +
guides(color = guide_legend(override.aes = list(size = 4),
title = 'HDI'))+
theme(axis.text=element_text(size=8),
legend.position = c(0.87, 0.25),
legend.key.size = unit(3, 'mm'),
legend.title = element_text( size=6),
legend.text=element_text(size=6),
axis.title=element_text(size=8),
legend.key = element_rect(fill = 'white', colour = NA),
aspect.ratio=1)
only3_sim
only3_sim %>%
write_rds('../data/068_only3_sim.rds')
# only plot the post diff forest in fruits and sweets
only3 <- post_diff_df %>%
filter(term %in% c('fg_fruit','fg_sweets', 'fg_veggie'))
only3_sim <- only3 %>%
group_by(term, shortname) %>%
median_qi(post_diff_original_scale, .width = c(.95, .8, .5)) %>%
ggplot(aes(y = shortname, x = post_diff_original_scale)) +
geom_interval(aes(xmin = .lower, xmax = .upper)) +
geom_vline(xintercept = 0, linetype = "dashed", col = 'black') +
labs(x = expression(Change~`in`~alpha~diversity),
y = '',
title = 'Diversity prediction') +
theme_classic() +
#scale_color_manual(values = key %>% select(fg1_name, color) %>% deframe()) +
scale_x_continuous(breaks = seq(-10, 20, 2)) +
scale_color_brewer(palette = 'Greys')+
xlim(-6, 4.5) +
guides(color = guide_legend(override.aes = list(size = 4),
title = 'HDI'))+
theme(axis.text=element_text(size=8),
legend.position = c(0.87, 0.25),
legend.key.size = unit(3, 'mm'),
legend.title = element_text( size=6),
legend.text=element_text(size=6),
axis.title=element_text(size=8),
legend.key = element_rect(fill = 'white', colour = NA),
aspect.ratio=1)
only3_sim
only3_sim %>%
write_rds('../data/068_only3_sim.rds')
# only plot the post diff forest in fruits and sweets
only3 <- post_diff_df %>%
filter(term %in% c('fg_fruit','fg_sweets', 'fg_veggie'))
only3_sim <- only3 %>%
group_by(term, shortname) %>%
median_qi(post_diff_original_scale, .width = c(.95, .8, .5)) %>%
ggplot(aes(y = shortname, x = post_diff_original_scale)) +
geom_interval(aes(xmin = .lower, xmax = .upper)) +
geom_vline(xintercept = 0, linetype = "dashed", col = 'black') +
labs(x = expression(Change~`in`~alpha~diversity),
y = '',
title = 'Diversity prediction') +
theme_classic() +
#scale_color_manual(values = key %>% select(fg1_name, color) %>% deframe()) +
scale_x_continuous(breaks = seq(-10, 20, 2)) +
scale_color_brewer(palette = 'Greys')+
xlim(-6, 4.5) +
guides(color = guide_legend(override.aes = list(size = 4),
title = 'HDI'))+
theme(axis.text=element_text(size=8),
legend.position = c(0.87, 0.25),
legend.key.size = unit(3, 'mm'),
legend.title = element_text( size=6),
legend.text=element_text(size=6),
axis.title=element_text(size=8),
legend.key = element_rect(fill = 'white', colour = NA),
aspect.ratio=1)
only3_sim
only3_sim %>%
write_rds('../data/068_only3_sim.rds')
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
top <- plot_grid(  f2a,diagram,
nrow = 1, labels = c('A','B'), rel_widths = c(1, 2))
bottom <- plot_grid(  f2c,f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top, bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
# only plot the post diff forest in fruits and sweets
only3 <- post_diff_df %>%
filter(term %in% c('fg_fruit','fg_sweets', 'fg_veggie'))
only3_sim <- only3 %>%
group_by(term, shortname) %>%
median_qi(post_diff_original_scale, .width = c(.95, .8, .5)) %>%
ggplot(aes(y = shortname, x = post_diff_original_scale)) +
geom_interval(aes(xmin = .lower, xmax = .upper)) +
geom_vline(xintercept = 0, linetype = "dashed", col = 'black') +
labs(x = expression(Change~`in`~alpha~diversity),
y = '',
title = 'Diversity prediction') +
theme_classic() +
#scale_color_manual(values = key %>% select(fg1_name, color) %>% deframe()) +
scale_x_continuous(breaks = seq(-10, 20, 2)) +
scale_color_brewer(palette = 'Greys')+
xlim(-6, 4.5) +
guides(color = guide_legend(override.aes = list(size = 4),
title = 'HDI'))+
theme(axis.text=element_text(size=8),
legend.position = c(0.87, 0.3),
legend.key.size = unit(3, 'mm'),
legend.title = element_text( size=6),
legend.text=element_text(size=6),
axis.title=element_text(size=8),
legend.key = element_rect(fill = 'white', colour = NA),
aspect.ratio=1)
only3_sim
only3_sim %>%
write_rds('../data/068_only3_sim.rds')
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
top <- plot_grid(  f2a,diagram,
nrow = 1, labels = c('A','B'), rel_widths = c(1, 2))
bottom <- plot_grid(  f2c,f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top, bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
# only plot the post diff forest in fruits and sweets
only3 <- post_diff_df %>%
filter(term %in% c('fg_fruit','fg_sweets', 'fg_veggie'))
only3_sim <- only3 %>%
group_by(term, shortname) %>%
median_qi(post_diff_original_scale, .width = c(.95, .8, .5)) %>%
ggplot(aes(y = shortname, x = post_diff_original_scale)) +
geom_interval(aes(xmin = .lower, xmax = .upper)) +
geom_vline(xintercept = 0, linetype = "dashed", col = 'black') +
labs(x = expression(Change~`in`~alpha~diversity),
y = '',
title = 'Diversity prediction') +
theme_classic() +
#scale_color_manual(values = key %>% select(fg1_name, color) %>% deframe()) +
scale_x_continuous(breaks = seq(-10, 20, 2)) +
scale_color_brewer(palette = 'Greys')+
xlim(-6, 4.5) +
guides(color = guide_legend(override.aes = list(size = 4),
title = 'HDI'))+
theme(axis.text=element_text(size=8),
legend.position = c(0.87, 0.3),
legend.key.size = unit(2, 'mm'),
legend.title = element_text( size=6),
legend.text=element_text(size=6),
axis.title=element_text(size=8),
legend.key = element_rect(fill = 'white', colour = NA),
aspect.ratio=1)
only3_sim
only3_sim %>%
write_rds('../data/068_only3_sim.rds')
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
top <- plot_grid(  f2a,diagram,
nrow = 1, labels = c('A','B'), rel_widths = c(1, 2))
bottom <- plot_grid(  f2c,f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top, bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
p <- '../figs/paper/cartoon_of_model.png'
diagram <- ggdraw() +
draw_image(magick::image_read(p),   scale = 0.7)
diagram
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
top <- plot_grid(  f2a,diagram,
nrow = 1, labels = c('A','B'), rel_widths = c(1, 2))
bottom <- plot_grid(  f2c,f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top, bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
f2c <- read_rds('../data/068_div_post.rds')
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
top <- plot_grid(  f2a,diagram,
nrow = 1, labels = c('A','B'), rel_widths = c(1, 2))
bottom <- plot_grid(  f2c,f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top, bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
p <- '../figs/paper/cartoon_of_model.png'
diagram <- ggdraw() +
draw_image(magick::image_read(p),   scale = 0.7)
diagram
f2c <- read_rds('../data/068_div_post.rds')
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
top <- plot_grid(  f2a,diagram,
nrow = 1, labels = c('A','B'), rel_widths = c(1, 2))
bottom <- plot_grid(  f2c,f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top, bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
p <- '../figs/paper/cartoon_of_model.png'
diagram <- ggdraw() +
draw_image(magick::image_read(p),   scale = 0.85)
diagram
f2c <- read_rds('../data/068_div_post.rds')
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
top <- plot_grid(  f2a,diagram,
nrow = 1, labels = c('A','B'), rel_widths = c(1, 2))
bottom <- plot_grid(  f2c,f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top, bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
plots <- align_plots(f2a, bottom, align = 'v', axis = 'l')
top <- plot_grid(plots[[1]], diagram, labels = c('A', 'B'), label_size = 12)
f2 <-  plot_grid(top, plots[[2]],
rel_heights = c(1,1),
nrow = 2)
f2
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
plots <- align_plots(f2a, f2c, align = 'v', axis = 'l')
plots
left <- align_plots(f2a, f2c, align = 'v', axis = 'l')
top <- plot_grid(left[[1]], diagram, labels = c('A', 'B'), label_size = 12)
top
bottom <- plot_grid(  left[[2]],f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top,bottom,
rel_heights = c(1,1),
nrow = 2)
f2
left <- align_plots(f2a, f2c, align = 'v', axis = 'l')
top <- plot_grid(left[[1]], diagram, labels = c('A', 'B'))
bottom <- plot_grid(  left[[2]],f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_heights = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top,bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
f2
left <- align_plots(f2a, f2c, align = 'v', axis = 'l')
top <- plot_grid(left[[1]], diagram, labels = c('A', 'B'),rel_widths  = c(1, 2) )
bottom <- plot_grid(  left[[2]],f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_widths  = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top,bottom,
rel_heights = c(1,1),
nrow = 2)
f2
p <- '../figs/paper/cartoon_of_model.png'
diagram <- ggdraw() +
draw_image(magick::image_read(p),   scale = 0.9)
diagram
left <- align_plots(f2a, f2c, align = 'v', axis = 'l')
top <- plot_grid(left[[1]], diagram, labels = c('A', 'B'),rel_widths  = c(1, 2) )
bottom <- plot_grid(  left[[2]],f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_widths  = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top,bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
f2
left
top
bottom
f2
p <- '../figs/paper/cartoon_of_model.png'
diagram <- ggdraw() +
draw_image(magick::image_read(p),   scale = 0.9)
diagram
f2c <- read_rds('../data/068_div_post.rds')
f2d <- read_rds('../data/068_only3_sim.rds')
f2e <- read_rds('../data/087_entero_genus_fg_main.rds')
left <- align_plots(f2a, f2c, align = 'v', axis = 'l')
top <- plot_grid(left[[1]], diagram, labels = c('A', 'B'),rel_widths  = c(1, 2) )
bottom <- plot_grid(  left[[2]],f2d,f2e,
nrow = 1, labels = c('C','D', 'E'), rel_widths  = c(1, 1, 1), align = 'hv')
f2 <-  plot_grid(top,bottom,
rel_heights = c(1,1),
nrow = 2)
ggsave('../figs/paper/F2_model_results_086.pdf',
width = 180,
height = 120,
#height = 60,
units = c("mm"),
dpi = 400, plot = f2)
f2
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(cowplot)
library(ggpubr)
